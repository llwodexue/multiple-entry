# å¤šå…¥å£é¡¹ç›®

## ğŸ§­ é¡¹ç›®ä»‹ç»

### ğŸš€ æŠ€æœ¯æ ˆ

Node â€”â€” ç¯å¢ƒå®‰è£…ï¼ˆéœ€è¦ç”¨åˆ° npm æˆ– pnpmï¼‰

- å®˜ç½‘é“¾æ¥ï¼š[http://nodejs.cn/](http://nodejs.cn/)

- ä»‹ç»ï¼šNode.js æ˜¯ä¸€ä¸ªå¼€æºçš„ã€è·¨å¹³å°çš„ JavaScript è¿è¡Œæ—¶ç¯å¢ƒ

  > Vue-cli5 Drop support of Node.js 8-11 and 13

- ç‰ˆæœ¬è¦æ±‚ï¼šNode >= v14ï¼Œé¡¹ç›®æ¨èä½¿ç”¨ Node >= v16.16.0

Element-ui â€”â€” å‰ç«¯ UI æ¡†æ¶

- å®˜ç½‘é“¾æ¥ï¼š[https://element.eleme.cn/#/zh-CN](https://element.eleme.cn/#/zh-CN)
- ä»‹ç»ï¼šä¸€å¥—ä¸ºå¼€å‘è€…ã€è®¾è®¡å¸ˆå’Œäº§å“ç»ç†å‡†å¤‡çš„åŸºäº Vue 2.0 çš„æ¡Œé¢ç«¯ç»„ä»¶åº“
- ç‰ˆæœ¬è¦æ±‚ï¼šElement-ui >= 2.13.0ï¼Œé¡¹ç›®æ¨èä½¿ç”¨ v2.15.14 ç‰ˆæœ¬

Vue â€”â€” å‰ç«¯ MVVM æ¡†æ¶

- å®˜ç½‘é“¾æ¥ï¼š[https://cn.vuejs.org/](https://cn.vuejs.org/)
- ä»‹ç»ï¼šä¸€å¥—ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼æ¡†æ¶ã€‚ä¸å…¶å®ƒå¤§å‹æ¡†æ¶ä¸åŒçš„æ˜¯ï¼ŒVue è¢«è®¾è®¡ä¸ºå¯ä»¥è‡ªåº•å‘ä¸Šé€å±‚åº”ç”¨ã€‚Vue çš„æ ¸å¿ƒåº“åªå…³æ³¨è§†å›¾å±‚ï¼Œä¸ä»…æ˜“äºä¸Šæ‰‹ï¼Œè¿˜ä¾¿äºä¸ç¬¬ä¸‰æ–¹åº“æˆ–æ—¢æœ‰é¡¹ç›®æ•´åˆ
- ç‰ˆæœ¬è¦æ±‚ï¼šVue >= 2.7ï¼Œé¡¹ç›®æ¨èä½¿ç”¨ v2.7.14

Vue ç”Ÿæ€åœˆ

1. [Vue Router](https://router.vuejs.org/)ï¼švue å®˜æ–¹çš„è·¯ç”±ã€‚å®ƒèƒ½å¿«é€Ÿçš„å¸®åŠ©ä½ æ„å»ºä¸€ä¸ªå•é¡µé¢æˆ–è€…å¤šé¡µé¢çš„é¡¹ç›®
2. [Vuex](https://vuex.vuejs.org/)ï¼šä¸“ä¸º Vue.js åº”ç”¨ç¨‹åºå¼€å‘çš„çŠ¶æ€ç®¡ç†æ¨¡å¼ã€‚å®ƒé‡‡ç”¨é›†ä¸­å¼å­˜å‚¨ç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€ï¼Œå¹¶ä»¥ç›¸åº”çš„è§„åˆ™ä¿è¯çŠ¶æ€ä»¥ä¸€ç§å¯é¢„æµ‹çš„æ–¹å¼å‘ç”Ÿå˜åŒ–ã€‚å®ƒèƒ½è§£å†³ä½ å¾ˆå¤šå…¨å±€çŠ¶æ€æˆ–è€…ç»„ä»¶ä¹‹é—´é€šä¿¡çš„é—®é¢˜
3. [Vue Loader](https://vue-loader.vuejs.org/)ï¼švue æ–‡ä»¶å®šåˆ¶çš„ä¸€ä¸ª webpack çš„ loaderï¼Œå®ƒå…è®¸ä½ ä»¥ä¸€ç§åä¸ºå•æ–‡ä»¶ç»„ä»¶ (SFCs)çš„æ ¼å¼æ’°å†™ Vue ç»„ä»¶ã€‚å®ƒèƒ½åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨çƒ­é‡è½½æ¥ä¿æŒçŠ¶æ€ï¼Œä¸ºæ¯ä¸ªç»„ä»¶æ¨¡æ‹Ÿå‡º scoped CSS ç­‰ç­‰åŠŸèƒ½ã€‚ä¸è¿‡å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä½ ä¸éœ€è¦å¯¹å®ƒç›´æ¥è¿›è¡Œé…ç½®ï¼Œè„šæ‰‹æ¶éƒ½å¸®ä½ å°è£…å¥½äº†
4. [Vue Dev-Tools](https://github.com/vuejs/vue-devtools)ï¼šVue åœ¨æµè§ˆå™¨ä¸‹çš„è°ƒè¯•å·¥å…·ã€‚å†™ vue å¿…å¤‡çš„ä¸€ä¸ªæµè§ˆå™¨æ’ä»¶ï¼Œèƒ½å¤§å¤§çš„æé«˜ä½ è°ƒè¯•çš„æ•ˆç‡
5. [Vue CLI](https://cli.vuejs.org/)ï¼šå®˜æ–¹æä¾›çš„ä¸€ä¸ª vue é¡¹ç›®è„šæ‰‹æ¶ï¼Œæœ¬é¡¹ç›®ä¹Ÿæ˜¯åŸºäºå®ƒè¿›è¡Œæ„å»ºçš„ã€‚å®ƒå¸®ä½ å°è£…äº†å¤§é‡çš„ webpackã€babel ç­‰å…¶å®ƒé…ç½®ï¼Œè®©ä½ èƒ½èŠ±æ›´å°‘çš„ç²¾åŠ›åœ¨æ­å»ºç¯å¢ƒä¸Šï¼Œä»è€Œèƒ½æ›´ä¸“æ³¨äºé¡µé¢ä»£ç çš„ç¼–å†™ã€‚ä¸è¿‡æ‰€æœ‰çš„è„šæ‰‹æ¶éƒ½æ˜¯é’ˆå¯¹å¤§éƒ¨åˆ†æƒ…å†µçš„ï¼Œæ‰€ä»¥ä¸€äº›ç‰¹æ®Šçš„éœ€æ±‚è¿˜æ˜¯éœ€è¦è‡ªå·±è¿›è¡Œé…ç½®ã€‚å»ºè®®å…ˆé˜…è¯»ä¸€éå®ƒçš„æ–‡æ¡£ï¼Œå¯¹ä¸€äº›é…ç½®æœ‰ä¸€äº›åŸºæœ¬çš„äº†è§£
6. [Vetur](https://github.com/vuejs/vetur)ï¼šVS Code çš„æ’ä»¶. å¦‚æœä½ ä½¿ç”¨ VS Code æ¥å†™ vue çš„è¯ï¼Œè¿™ä¸ªæ’ä»¶æ˜¯å¿…ä¸å¯å°‘çš„
7. [Vue I18n](https://vue-i18n.intlify.dev/)ï¼šVue.js çš„å›½é™…åŒ–æ’ä»¶ã€‚å®ƒå¯ä»¥è½»æ¾åœ°å°†ä¸€äº›æœ¬åœ°åŒ–åŠŸèƒ½é›†æˆåˆ°ä½ çš„ Vue.js åº”ç”¨ç¨‹åºä¸­

Webpack â€”â€” æ‰“åŒ…å·¥å…·

- å®˜ç½‘é“¾æ¥ï¼š[https://www.webpackjs.com/](https://www.webpackjs.com/)
- ä»‹ç»ï¼šæ˜¯ä¸€ä¸ªç”¨äºç°ä»£ JavaScript åº”ç”¨ç¨‹åºçš„ é™æ€æ¨¡å—æ‰“åŒ…å·¥å…·ã€‚å½“ webpack å¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šåœ¨å†…éƒ¨ä»ä¸€ä¸ªæˆ–å¤šä¸ªå…¥å£ç‚¹æ„å»ºä¸€ä¸ªä¾èµ–å›¾(dependency graph)ï¼Œç„¶åå°†ä½ é¡¹ç›®ä¸­æ‰€éœ€çš„æ¯ä¸€ä¸ªæ¨¡å—ç»„åˆæˆä¸€ä¸ªæˆ–å¤šä¸ª _bundles_ï¼Œå®ƒä»¬å‡ä¸ºé™æ€èµ„æºï¼Œç”¨äºå±•ç¤ºä½ çš„å†…å®¹
- ç‰ˆæœ¬è¦æ±‚ï¼šVue-cli >= 5ï¼Œå†…éƒ¨é›†æˆ webpack5

Sass â€”â€” CSS é¢„å¤„ç†å™¨

- å®˜ç½‘é“¾æ¥ï¼š[https://www.sass.hk/](https://www.sass.hk/)
- ä»‹ç»ï¼šä¸–ç•Œä¸Šæœ€æˆç†Ÿã€æœ€ç¨³å®šã€æœ€å¼ºå¤§çš„ä¸“ä¸šçº§ CSS æ‰©å±•è¯­è¨€
- ç‰ˆæœ¬è¦æ±‚ï¼šsass >= 1.60ï¼Œsass-loader >= 12

echarts â€”â€” å›¾è¡¨å·¥å…·

- å®˜ç½‘é“¾æ¥ï¼š[https://echarts.apache.org/zh/index.html](https://echarts.apache.org/zh/index.html)
- ä»‹ç»ï¼šä¸€ä¸ªåŸºäº JavaScript çš„å¼€æºå¯è§†åŒ–å›¾è¡¨åº“
- ç‰ˆæœ¬è¦æ±‚ï¼šecharts >= 5ï¼Œecharts-liquidfill >= 3

### ğŸš© è¿è¡Œå’Œå®‰è£…

- ##### å®‰è£…ä¾èµ–

```bash
$ npm install
```

- ##### è¿è¡Œé¡¹ç›®

```bash
$ npm run dev       # run all
$ npm run dev:admin # run one -> admin
$ npm run dev:other # run one -> other
```

- ##### é¡¹ç›®æ‰“åŒ…å‘½ä»¤

```bash
$ npm run build       # build all
$ npm run build:admin # build one -> admin
$ npm run build:other # build one -> other
```

## â­• è§„èŒƒ

### 1ï¸âƒ£ å‘½åè§„èŒƒ

é¦–å­—æ¯å¤§å†™ï¼šPascalCaseã€‚çŸ­æ¨ªçº¿ï¼škebab-case

- **é¡¹ç›®å‘½å**ï¼šå…¨éƒ¨ kebab-case å‘½å

  æ¯”å¦‚ï¼š`my-project`

- **ç»„ä»¶å‘½å**ï¼šæ‰€æœ‰ç»„ä»¶ä½¿ç”¨å¤§å†™å¼€å¤´ PascalCase å‘½åè§„èŒƒ

  æ¯”å¦‚ï¼š`@/components/BackToTop/index.vue`

- **æ–‡ä»¶å‘½å**ï¼šæ‰€æœ‰ `.js` éƒ½æ˜¯ç”¨ kebab-caseï¼ˆä¾‹å¤–ï¼šhooks ä½¿ç”¨ PascalCaseï¼‰

  æ¯”å¦‚ï¼š`@/utils/des-base64.js`

- **ç›®å½•å‘½å**ï¼šæ‰€æœ‰ç›®å½•æ–‡ä»¶é‚£ä½¿ç”¨ kebab-caseï¼Œæœ‰å¤æ•°ç»“æ„è¦é‡‡ç”¨å¤æ•°å‘½åæ³•

  æ¯”å¦‚ï¼š`scripts`ã€`styles`ã€`components`ã€`images`ã€`views`ã€`utils`

- **é¡µé¢å‘½å**ï¼šåœ¨ `src/views` ä¸­ï¼Œä»£è¡¨è·¯ç”±çš„ `.vue` æ–‡ä»¶éƒ½æ˜¯ç”¨ kebab-case

  æ¯”å¦‚ï¼š`@/views/svg-icons/index.vue`

### 2ï¸âƒ£ Gitæäº¤è§„èŒƒ

Git æ¯æ¬¡æäº¤ä»£ç æ—¶åŠ ä¸Šæ‰‹å†™ **æäº¤è¯´æ˜ï¼ˆCommit messageï¼‰**ï¼š

- å¯ä»¥å‚è€ƒï¼š[vuejs Pull requests](https://github.com/vuejs/core/pulls)

  Git æäº¤å†…å®¹éœ€è¦åŒ…å«ï¼ˆåšä¸€ä¸ªç®€åŒ–ï¼‰ï¼š`type`ï¼ˆç±»å‹ï¼‰ã€`commit`ï¼ˆè¯¦ç»†ä¿¡æ¯ï¼‰

  ç¤ºä¾‹ï¼š`fix: è§£å†³xxxå‡ºç°çš„bug`

`type` ç”¨äºè¯´æ˜ `commit` æäº¤æ€§è´¨ï¼Œé€šå¸¸å€¼ä¸ºä¸‹è¡¨ï¼š

| å€¼       | æè¿°                                                        |
| -------- | ----------------------------------------------------------- |
| feat     | æ–°å¢ä¸€ä¸ªåŠŸèƒ½                                                |
| fix      | ä¿®å¤ä¸€ä¸ª Bug                                                |
| docs     | æ–‡æ¡£å˜æ›´                                                    |
| style    | ä»£ç æ ¼å¼ï¼ˆä¿®å¤ Eslint æŠ¥é”™ï¼‰                                |
| refactor | ä»£ç é‡æ„                                                    |
| perf     | æ”¹å–„æ€§èƒ½                                                    |
| test     | æµ‹è¯•                                                        |
| build    | å˜æ›´é¡¹ç›®æ„å»ºæˆ–å¤–éƒ¨ä¾èµ–ï¼ˆwebpackã€npmï¼‰                      |
| ci       | æ›´æ”¹æŒç»­é›†æˆè½¯ä»¶çš„é…ç½®æ–‡ä»¶å’Œ package.json ä¸­çš„ scripts å‘½ä»¤ |
| chore    | å˜æ›´æ„å»ºæµç¨‹æˆ–è¾…åŠ©å·¥å…·                                      |
| revert   | ä»£ç å›é€€                                                    |

### 3ï¸âƒ£ æ ¼å¼åŒ–è§„èŒƒ

VSCode å¼€å‘å’Œ WebStorm å¼€å‘æœ€å¥½éƒ½å®‰è£… Prettier è¿™ä¸ªæ’ä»¶ï¼Œæ ¹ç›®å½•é…ç½® `prettierrc.js`

```js
module.exports = {
  // ä¸€è¡Œæœ€å¤š 120 å­—ç¬¦
  printWidth: 120,
  // ä½¿ç”¨ 2 ä¸ªç©ºæ ¼ç¼©è¿›
  tabWidth: 2,
  // ä¸ä½¿ç”¨ç¼©è¿›ç¬¦ï¼Œè€Œä½¿ç”¨ç©ºæ ¼
  useTabs: false,
  // è¡Œå°¾ä¸éœ€è¦æœ‰åˆ†å·
  semi: false,
  // ä½¿ç”¨å•å¼•å·
  singleQuote: true,
  // jsx ä¸ä½¿ç”¨å•å¼•å·ï¼Œè€Œä½¿ç”¨åŒå¼•å·
  jsxSingleQuote: true,
  // jsx æ ‡ç­¾çš„åå°–æ‹¬å·éœ€è¦æ¢è¡Œ
  bracketSameLine: false,
  // æœ«å°¾ä¸éœ€è¦æœ‰é€—å·
  trailingComma: 'none',
  // å¤§æ‹¬å·å†…çš„é¦–å°¾éœ€è¦ç©ºæ ¼
  bracketSpacing: true,
  // å¯¹è±¡çš„ key ä»…åœ¨å¿…è¦æ—¶ç”¨å¼•å·
  quoteProps: 'as-needed',
  // ç®­å¤´å‡½æ•°ï¼Œåªæœ‰ä¸€ä¸ªå‚æ•°çš„æ—¶å€™ï¼Œä¸éœ€è¦æ‹¬å·
  arrowParens: 'avoid',
  // æ‰€æœ‰å…ƒç´ é—´çš„ç©ºæ ¼éƒ½ä¼šè¢«å¿½ç•¥ï¼Œç›´æ¥å¦èµ·ä¸€è¡Œ
  htmlWhitespaceSensitivity: 'ignore',
  // vue æ–‡ä»¶ä¸­çš„ script å’Œ style å†…ä¸ç”¨ç¼©è¿›
  vueIndentScriptAndStyle: false,
  // æ¢è¡Œç¬¦ä½¿ç”¨ lf
  endOfLine: 'lf',
  // æ ¼å¼åŒ–æ¨¡æ¿å­—ç¬¦ä¸²é‡Œçš„å†…å®¹
  embeddedLanguageFormatting: 'auto',
  // html, vue, jsx ä¸­æ¯ä¸ªå±æ€§å ä¸€è¡Œ
  singleAttributePerLine: false,
  // ä½¿ç”¨é»˜è®¤çš„æŠ˜è¡Œæ ‡å‡†
  proseWrap: 'preserve'
}
```

### 4ï¸âƒ£ ä»£ç è§„èŒƒ

æ¶‰åŠçš„æ¯”è¾ƒå¤šï¼Œéµå¾ª `.eslintrc.js` é‡Œé¢çš„è§„èŒƒ

## ğŸ“¦ Webpackå¤„ç†

### ğŸ­ Preload

æ‰§è¡Œ `npm run build`ï¼Œplugin æŠ¥é”™ä¿¡æ¯

```bash
Error: Cannot call .tap() on a plugin that has not yet been defined. Call plugin('preload')
```

> å‚è€ƒï¼š[https://cli.vuejs.org/zh/config/#pages](https://cli.vuejs.org/zh/config/#pages) è¿™é‡Œé¢çš„æç¤º
>
> ![image-20231211154107533](https://gitee.com/lilyn/pic/raw/master/lagoulearn-img/image-20231211154107533.png)

è¯•å›¾ä¿®æ”¹ `html-webpack-plugin` å’Œ `preload-webpack-plugin` æ’ä»¶çš„é€‰é¡¹ï¼Œéœ€è¦é¢å¤–å¤„ç†

```bash
$ npm install @vue/preload-webpack-plugin -D
+ "@vue/preload-webpack-plugin": "^2.0.0"
```

ä¹‹å‰ç›´æ¥ä½¿ç”¨ tap è¿æ¥å³å¯ï¼Œç°åœ¨éœ€è¦æŒ‡å®š pluginï¼ŒVue-cli4 çš„é…ç½®å¦‚ä¸‹ï¼š

```js
Object.keys(pages).forEach(pageName => {
  config.plugin(`preload-${pageName}`).tap(() => [
    {
      rel: 'preload',
      fileBlacklist: [/\.map$/, /hot-update\.js$/, /runtime\..*\.js$/],
      include: 'initial'
    }
  ])
  config.plugins.delete(`prefetch-${pageName}`)
  config
    .plugin('ScriptExtHtmlWebpackPlugin')
    .after('html-' + pageName)
    .use('script-ext-html-webpack-plugin', [
      {
        inline: /runtime\..*\.js$/
      }
    ])
    .end()
})
```

Vue-cli5 é‡Œä¸èƒ½ä½¿ç”¨ ScriptExtHtmlWebpackPlugin

![image-20231211180150621](https://gitee.com/lilyn/pic/raw/master/lagoulearn-img/image-20231211180150621.png)

```js
/** vue.config.js */
Object.keys(pages).forEach(pageName => {
  config.plugin(`preload-${pageName}`).use(require('@vue/preload-webpack-plugin'), [
    {
      rel: 'preload',
      fileBlacklist: [/\.map$/, /hot-update\.js$/, /runtime\..*\.js$/],
      include: 'initial'
    }
  ])
  config.plugins.delete(`prefetch-${pageName}`)
})
```

### ğŸ® CDN

ç”±äºå†…ç½‘å¯èƒ½æ— æ³•è®¿é—®å¤–ç½‘é—®é¢˜ï¼Œå¯ä»¥æ­å»º npm ç§åº“ nexus

1. åœ¨ `vue.config.js` çš„ `chainWebpack` æˆ– `configureWebpack ` ä¸­å¯¹ `externals` é…ç½®å°å¤–éƒ¨ä½¿ç”¨çš„åŒ…

   ```js
   /** vue.config.js */
   const isProduction = process.env.NODE_ENV === 'production'
   const assetsCDN = {
     echarts: 'echarts'
   }
   module.exports = {
     configureWebpack: {
       externals: isProduction ? assetsCDN.externals : {}
     }
   }
   ```

2. åœ¨å„ä¸ªç›®å½•ä¸‹çš„ `index.html` é‡Œå¼•å…¥å¯¹åº”çš„åŒ…ï¼ˆ`public.html` åªæ˜¯å‘å¯¼é¡µä¸å…¶ä»–é¡µé¢æ— å…³ï¼Œå¯ä»¥ä¸å¼•å…¥ï¼‰

   ```html
   <!-- public/index.html -->
   <script src="https://cdn.bootcdn.net/ajax/libs/echarts/4.8.0/echarts-en.common.min.js"></script>
   ```

ä½†æ˜¯å¦‚æœæƒ³å¢åŠ ä¸€ä¸ª CDN é“¾æ¥å°±éœ€è¦æ”¹ä¸¤ä¸ªæ–‡ä»¶ï¼Œè¿™æ ·ä¸æ˜¯å¾ˆå¥½ï¼Œæ‰€ä»¥å¯ä»¥å°† JS é“¾æ¥å’Œ `externals` è¦æå–çš„æ–‡ä»¶åéƒ½æ”¾åœ¨ä¸€ä¸ªå¯¹è±¡é‡Œé¢

```js
/** vue.config.js */
const isProduction = process.env.NODE_ENV === 'production'
const assetsCDN = {
  externals: {
    vue: 'Vue',
    'vue-router': 'VueRouter',
    vuex: 'Vuex',
    axios: 'axios'
  },
  js: [
    '//cdn.jsdelivr.net/npm/vue@2.7.14/dist/vue.min.js',
    '//cdn.jsdelivr.net/npm/vue-router@3.6.4/dist/vue-router.min.js',
    '//cdn.jsdelivr.net/npm/vuex@3.6.2/dist/vuex.min.js',
    '//cdn.jsdelivr.net/npm/axios@0.27.2/dist/axios.min.js'
  ]
}
module.exports = {
  configureWebpack: {
    externals: isProduction ? assetsCDN.externals : {}
  },
  chainWebpack: config => {
    if (isProduction) {
      Object.keys(pages).forEach(pageName => {
        config.plugin(`html-${pageName}`).tap(args => {
          args[0].cdn = assetsCDN
          return args
        })
      })
    }
  }
}
```

ä¹‹åé€šè¿‡ webpack + ejs è‡ªåŠ¨å†™å…¥åˆ° `public/index.html` å³å¯

```html
<!-- public/index.html -->
<% for (var i in htmlWebpackPlugin.options.cdn && htmlWebpackPlugin.options.cdn.js) { %>
	<script type="text/javascript" src="<%= htmlWebpackPlugin.options.cdn.js[i] %>"></script>
<% } %>
```

### ğŸ¯ Terser

> Terser é‡Œé¢å…¶å®ƒé…ç½®å¯ä»¥å‚è€ƒï¼š[https://github.com/terser/terser#minify-options](https://github.com/terser/terser#minify-options)

åˆ é™¤ consoleï¼Œå¯ä»¥ä½¿ç”¨ terser

```js
/** vue.config.js */
config.optimization.minimizer('terser').tap(options => {
  // æ³¨é‡Šconsole.*
  options[0].terserOptions.compress.drop_console = true
  // debugger
  options[0].terserOptions.compress.drop_debugger = true
  // å…¨éƒ¨æ³¨é‡Š
  args[0].terserOptions.output = {
    comments: false
  }
  return options
})
```

æˆ–æ˜¯ä½¿ç”¨ babel å»æ‰ consoleï¼Œéœ€è¦å®‰è£… `babel-plugin-transform-remove-console`

```bash
$ npm install babel-plugin-transform-remove-console -D
```

æ›´æ”¹ `babel.config.js`

- å¼€å‘ç¯å¢ƒä½¿ç”¨ `babel-plugin-dynamic-import-node`
- ç”Ÿäº§ç¯å¢ƒåˆ é™¤ console

```js
/** babel.config.js */
module.exports = {
  presets: ['@vue/cli-plugin-babel/preset'],
  env: {
    development: {
      plugins: ['dynamic-import-node']
    },
    production: {
      plugins: ['transform-remove-console']
    }
  }
}
```

### ğŸ° SplitChunks

> [æ‰‹æ‘¸æ‰‹ï¼Œå¸¦ä½ ç”¨åˆç†çš„å§¿åŠ¿ä½¿ç”¨ webpack4ï¼ˆä¸‹ï¼‰](https://segmentfault.com/a/1190000015919928)

vue-element-admin æ ¹æ®ä½“ç§¯å¤§å°ã€å…±ç”¨ç‡ã€æ›´æ–°é¢‘ç‡é‡æ–°åˆ’åˆ†åŒ…ï¼Œå¯¹ä»£ç è¿›è¡Œå¦‚ä¸‹çš„åˆ’åˆ†ï¼š

åŸºç¡€ç±»åº“ï¼š`chunks-libs`

- æ¯”å¦‚ï¼š`vue` + `vue-router` + `vuex` + `axios`ï¼Œå®ƒçš„å‡çº§é¢‘ç‡ä¸é«˜ï¼Œä½†æ¯ä¸ªé¡µé¢éƒ½éœ€è¦å®ƒä»¬

UI ç»„ä»¶åº“ï¼š`chunk-elementUI`

- å®ƒå®åœ¨æ¯”è¾ƒå¤§ï¼Œ`Element` gzip å‹ç¼©åè¿˜å¾—æ¥è¿‘ 200kbï¼ŒUI ç»„ä»¶åº“çš„æ›´æ–°é¢‘ç‡ä¹Ÿä¼šæ¯” libs é«˜ä¸€ç‚¹ï¼Œå»ºè®® UI ç»„ä»¶åº“ä¹Ÿå•ç‹¬æ‹†æˆä¸€ä¸ªåŒ…

è‡ªå®šä¹‰ç»„ä»¶/å‡½æ•°ï¼š`chunk-commons`

- å¿…è¦ç»„ä»¶å¦‚ï¼šè·¯ç”±è¡¨ã€å…¨å±€ stateã€å…¨å±€ä¾§è¾¹æ /Header/Footer ç­‰ç»„ä»¶ï¼Œé»˜è®¤éƒ½ä¼šæ‰“åŒ…åˆ° `app.js` ä¸­
- éå¿…è¦ç»„ä»¶ï¼šæ¯”å¦‚å°è£…çš„ selectã€table ç»„ä»¶ï¼Œä½“ç§¯ä¸ä½†ä½†å¼•ç”¨æ¬¡æ•°å¤šï¼Œé»˜è®¤ä¼šæ‰“åŒ…åˆ°æ¯ä¸€ä¸ªæ‡’åŠ è½½çš„ chunk ä¸­ï¼Œé€ æˆä¸å°‘çš„æµªè´¹

ä½é¢‘ç»„ä»¶

- æ¯”å¦‚å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ã€`echarts` ç­‰ï¼Œå¤§äº 30kbï¼Œé»˜è®¤ä¼šæ‰“åŒ…å…·ä½“ä½¿ç”¨å®ƒçš„é¡µé¢ bundle ä¸­

```js
/** vue.config.js */
config.when(isProduction, config => {
  // åˆ†åŒ…ç­–ç•¥
  config.optimization.splitChunks({
    chunks: 'all',
    cacheGroups: {
      libs: {
        name: 'chunk-libs',
        test: /[\\/]node_modules[\\/]/,
        priority: 10,
        chunks: 'initial' // åªæ‰“åŒ…åˆå§‹æ—¶ä¾èµ–çš„ç¬¬ä¸‰æ–¹
      },
      elementUI: {
        name: 'chunk-elementUI',
        priority: 20, // æƒé‡è¦å¤§äº libs å’Œ app ä¸ç„¶ä¼šè¢«æ‰“åŒ…è¿› libs æˆ–è€… app
        test: /[\\/]node_modules[\\/]_?element-ui(.*)/
      },
      commons: {
        name: 'chunk-commons',
        test: resolve(`src/components`),
        minChunks: 3, // æœ€å°å…±ç”¨æ¬¡æ•°
        priority: 5,
        reuseExistingChunk: true
      }
    }
  })
  // å°†runtimeä»£ç å•ç‹¬æ‰“åŒ…
  config.optimization.runtimeChunk('multiple')
})
```

### ğŸ² Title

ä¹‹å‰ `index.html` çš„æ ‡é¢˜æ˜¯é€šè¿‡ ejs è®¾ç½®çš„

1. Webpackï¼š `<%= webpackConfig.name %>` æ‰“åŒ…å†™å…¥è¿›å»çš„
2. HTMLWebpackPluginï¼š`<%= htmlWebpackPlugin.options.title %>` æ‰“åŒ…å†™å…¥è¿›å»çš„

```html
<title><%= webpackConfig.name %></title>
<!-- or -->
<title><%= htmlWebpackPlugin.options.title %></title>
```

```js
/** vue.config.js */
const name = 'XXç®¡ç†ç³»ç»Ÿ'
module.exports = {
  configureWebpack: {
    name: name, // webpack
    plugins: [
      new HtmlWebpackPlugin({
        title: name, // HTMLWebpackPlugin
      })
    ]
  }
}
```

ä½†æ˜¯ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æ¯”è¾ƒéš¾åšåˆ°å›½é™…åŒ–

- å¦‚æœéœ€è¦å›½é™…åŒ–ï¼Œå¯ä»¥åœ¨è·¯ç”±å¯¼èˆªå®ˆå« `router.beforeEach` é‡Œè®¾ç½®äº†

### ğŸ IE

å¦‚æœéœ€è¦è€ƒè™‘ IE å…¼å®¹

1. åˆ é™¤ `.browserslistrc` æ–‡ä»¶é‡Œçš„ ~~not dead~~
2. `vue.config.js` æ–‡ä»¶é‡Œæ·»åŠ  `transpileDependencies: true`

#### CSSå…¼å®¹é—®é¢˜

> å¯ä»¥è¿™ä¸ªç½‘ç«™è¿›è¡ŒæŸ¥è¯¢ï¼š[https://caniuse.com/](https://caniuse.com/)

1. flex å¸ƒå±€ä¸è¦ä½¿ç”¨ `justify-content: space-evenly`ï¼ˆä¸æ”¯æŒ Chorme 56 ç‰ˆæœ¬ä»¥ä¸‹ï¼‰

2. åœ¨ä¸ç»™ `display: flex` çš„æƒ…å†µä¸‹ç›´æ¥ç»™ `flex: 1` åœ¨ä½ç‰ˆæœ¬æµè§ˆå™¨ä¼šé€ æˆé«˜åº¦ä¸èƒ½è‡ªåŠ¨æ’‘å¼€ï¼ˆåŸå› ï¼š`flex-grow: 1` æ²¡ç”Ÿæ•ˆï¼‰

   ```css
   .table-wrapper {
     display: flex;
     flex-direction: column;
     flex: 1;
   }
   ```

3. ç»å¯¹å®šä½ `position: absolute` éœ€è¦æŠŠ `left/right` å’Œ `top/bottom` éƒ½å†™ä¸Šï¼Œä¸ç„¶åœ¨ä½ç‰ˆæœ¬æµè§ˆå™¨ä¼šå‡ºç°ä½ç½®é”™ä¹±æƒ…å†µ

   - æ— æ³•ä½¿ç”¨ `flex` å¸ƒå±€ä¸”çŸ¥é“å®½é«˜æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ `left + ï¹£margin-left` å’Œ `top + -margin-top`
   - ä½¿ç”¨ transform åœ¨ IE æµè§ˆå™¨å¯èƒ½å‡ºç°æ’‘å¼€ç›’å­çš„æƒ…å†µï¼ˆå‡ºç°æ»šåŠ¨æ¡ï¼‰å»ºè®®ä¸ä½¿ç”¨

   ```css
   .login-shadow {
     position: absolute;
     width: 80rem * 1.06;
     height: 37.5rem * 1.06;
     left: 50%;
     top: 50%;
     margin-left: -80rem * 1.06 / 2;
     margin-top: -37.5rem * 1.06 / 2;
     /* transform: translate(-50%, -50%); */
   }
   ```

4. IE11 CSS3 æ ·å¼éƒ¨åˆ†ä¼šå‡ºç°é—®é¢˜

   - æ¯”å¦‚ï¼šfilter æœ‰å¼€æºçš„ [polyfill](https://github.com/Schepp/CSS-Filters-Polyfill) ä¸è¿‡ä¸æ”¯æŒ IE10+ æ”¯æŒ IE6-9

#### JSå…¼å®¹é—®é¢˜

`crypto-js ç¼ºå°‘ ")"`

- è§£å†³æ–¹æ¡ˆï¼š`crypto-js` ç”± 4.x ç‰ˆæœ¬åˆ‡æ¢è‡³ 3.x ç‰ˆæœ¬

`SyntaxError: è¯­æ³•é”™è¯¯ ./node_modules/jsencrypt/bin/jsencrypt.js`

- è§£å†³æ–¹æ¡ˆï¼š`jsencrypt` ç”± 3.x ç‰ˆæœ¬åˆ‡æ¢è‡³ 3.0 ç‰ˆæœ¬

é¡¹ç›®å·²ç»ä½¿ç”¨äº† `@vue/cli-plugin-babel/preset` å·²ç»å¯¹ä»£ç è¿›è¡Œäº† babel è½¬æ¢

- ä½†æ˜¯åƒ ElementUI è¿™ç§å¹¶æ²¡æœ‰è¿›è¡Œ babel è½¬æ¢ã€‚å¯ä»¥ä½¿ç”¨ Vue-cli çš„ `transpileDependencies: true`

ä½¿ç”¨å¯é€‰é“¾ï¼ˆ`?.`ï¼‰æ‰“åŒ…æŠ¥é”™ï¼Œç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ï¼ˆ`??`ï¼‰åŒç†

> ä½¿ç”¨å¯¹åº”æ–°è¯­æ³•æ‰“åŒ…å¤±è´¥ï¼Œéœ€è¦å®‰è£…çš„å‚è€ƒ babel å®˜ç½‘[https://babeljs.io/docs/babel-preset-env](https://babeljs.io/docs/babel-preset-env)

- å®‰è£… `@babel/plugin-transform-optional-chaining`

  ```bash
  $ npm install @babel/plugin-transform-optional-chaining -D
  ```

  é…ç½® `babel.config.js`

  ```js
  module.exports = { 
    plugins: ["@babel/plugin-transform-optional-chaining"]
  }
  ```

ä¸‹è½½ Blob æ–‡ä»¶å…¼å®¹ IE

- ä½¿ç”¨ `window.navigator.msSaveBlob` åˆ¤æ–­ä¸€ä¸‹

  ```js
  if (window.navigator.msSaveBlob) {
    try {
      window.navigator.msSaveBlob(blob, fileName) // ie æµè§ˆå™¨
    } catch (e) {
      // console.log(e)
    }
  } else {
    const URL = window.URL || window.webkitURL
    const link = document.createElement('a')
    const href = URL.createObjectURL(blob)
    link.href = href
    link.download = fileName
    link.click()
    window.URL.revokeObjectURL(href)
  }
  ```

### ğŸ´ Pom

è™½ç„¶å‰åç«¯åˆ†ç¦»ååˆ†æµè¡Œï¼Œä½†æ˜¯å‰åç«¯ä¸€èµ·ä½¿ç”¨ Maven è¿›è¡Œæ‰“ä¸º jar åŒ…çš„é¡¹ç›®ä¹Ÿæ˜¯ä¸ªè¾ƒä¸ºå¸¸è§çš„ä½œæ³•

éœ€è¦åœ¨æ ¹ç›®å½•æ·»åŠ  `pom.xml` å³å¯

- pom æ˜¯ Project Object Modelï¼ˆé¡¹ç›®å¯¹è±¡æ¨¡å‹ï¼‰çš„ç¼©å†™ï¼Œæ˜¯ Maven ä¸­çš„é¡¹ç›®æ–‡ä»¶ï¼Œå¯ç”¨äºç®¡ç†ä¸é…ç½®ä¾èµ–ï¼Œç»„ç»‡ä¿¡æ¯ï¼Œé¡¹ç›®æˆæƒï¼Œè¿œç¨‹ä»“åº“ç­‰ç­‰
